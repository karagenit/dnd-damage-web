<!DOCTYPE html>
<html>
  <head>
    <title>D&D Average Damage</title>
  </head>

  <body>
    Hi!
    <input type="number" step="1" name="tohit" id="tohit" placeholder="To Hit Bonus">
    <input type="number" step="0.5" name="damage" id="damage" placeholder="Damage">
    <button type="button" onclick="calculate()">Calculate</button>
    <br>
    <pre id="output">
    </pre>
    <br>
    <canvas id="chart" width="500px" height="500px"></canvas>
  </body>
</html>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.bundle.js"></script>

<script>
  function calculate() {
    var hit = parseFloat(document.getElementById('tohit').value);
    var dmg = parseFloat(document.getElementById('damage').value);
    var out = "";
    var data = [];

    for(ac = 8; ac < 26; ac++) {
      var damage = 0;
      for(roll = 2; roll < 20; roll++) {
        if(roll + hit >= ac) {
          damage += dmg;
        }
      }
      damage += 2 * dmg;
      damage /= 20;
      out = out + "AC " + ac + " Damage: " + damage + "\n";
      data[ac-8] = {
        x: ac,
        y: damage
      };
    }

    document.getElementById('output').innerHTML = out;
    graphData(data);
  }

  function graphData(data) {
    var ctx = document.getElementById("chart").getContext('2d');
    var scatterChart = new Chart(ctx, {
      type: 'scatter',
      data: {
        datasets: [{
          label: 'Scatter Dataset',
          data: data
        }]
      },
      options: {
        scales: {
          xAxes: [{
            type: 'linear',
            position: 'bottom'
          }]
        }
      }
    });
  }
</script>
